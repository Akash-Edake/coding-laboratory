(function(a){Drupal.progressBar=function(b,c,d,e){var f=this;this.id=b,this.method=d||'GET',this.updateCallback=c,this.errorCallback=e,this.element=a('<div class="progress" aria-live="polite"></div>').attr('id',b),this.element.html('<div class="bar"><div class="filled"></div></div><div class="percentage"></div><div class="message">&nbsp;</div>')},Drupal.progressBar.prototype.setProgress=function(b,c){b>=0&&b<=100&&(a('div.filled',this.element).css('width',b+'%'),a('div.percentage',this.element).html(b+'%')),a('div.message',this.element).html(c),this.updateCallback&&this.updateCallback(b,c,this)},Drupal.progressBar.prototype.startMonitoring=function(a,b){this.delay=b,this.uri=a,this.sendPing()},Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer),this.uri=null},Drupal.progressBar.prototype.sendPing=function(){if(this.timer&&clearTimeout(this.timer),this.uri){var b=this;a.ajax({type:this.method,url:this.uri,data:'',dataType:'json',success:function(a){if(a.status==0){b.displayError(a.data);return}b.setProgress(a.percentage,a.message),b.timer=setTimeout(function(){b.sendPing()},b.delay)},error:function(a){b.displayError(Drupal.ajaxError(a,b.uri))}})}},Drupal.progressBar.prototype.displayError=function(b){var c=a('<div class="messages error"></div>').html(b);a(this.element).before(c).hide(),this.errorCallback&&this.errorCallback(this)}})(jQuery),function(a){"use strict";Drupal.behaviors.webform=Drupal.behaviors.webform||{},Drupal.behaviors.webform.attach=function(a){Drupal.webform.datepicker(a),Drupal.settings.webform&&Drupal.settings.webform.conditionals&&Drupal.webform.conditional(a)},Drupal.webform=Drupal.webform||{},Drupal.webform.datepicker=function(b){a('div.webform-datepicker').each(function(){var d=a(this),e=d.find('input.webform-calendar'),b,c,h,i,f,g;if(e.length==0)return;b=e[0].className.replace(/.*webform-calendar-start-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-'),c=e[0].className.replace(/.*webform-calendar-end-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-'),h=e[0].className.replace(/.*webform-calendar-day-(\d).*/,'$1'),b=new Date(b[0],b[1]-1,b[2]),c=new Date(c[0],c[1]-1,c[2]),b>c&&(i=b,b=c,c=i),f=b.getFullYear(),g=c.getFullYear(),e.datepicker({dateFormat:'yy-mm-dd',yearRange:f+':'+g,firstDay:parseInt(h),minDate:b,maxDate:c,onSelect:function(b,c){var a=b.split('-');d.find('select.year, input.year').val(+a[0]).trigger('change'),d.find('select.month').val(+a[1]).trigger('change'),d.find('select.day').val(+a[2]).trigger('change')},beforeShow:function(i,j){var b=d.find('select.year, input.year').val(),c=d.find('select.month').val(),e=d.find('select.day').val(),h=new Date;b=b||h.getFullYear(),c=c||h.getMonth()+1,e=e||h.getDate(),b=b<f||b>g?f:b,a(i).val(b+'-'+c+'-'+e)}}),e.click(function(b){a(this).focus(),b.preventDefault()})})},Drupal.webform.conditional=function(b){a.each(Drupal.settings.webform.conditionals,function(c,b){var d=a('.'+c+':not(.webform-conditional-processed)');d.each(function(e,d){var c=a(d);c.addClass('webform-conditional-processed'),c.bind('change',{settings:b},Drupal.webform.conditionalCheck),Drupal.webform.doConditions(c,b)})})},Drupal.webform.conditionalCheck=function(b){var c=a(b.target).closest('.webform-component'),e=c.closest('form'),f=c.attr('class').match(/webform-component--[^ ]+/)[0],d=b.data.settings;d.sourceMap[f]&&Drupal.webform.doConditions(e,d)},Drupal.webform.doConditions=function(c,d){var b,e;function i(a){b=-1,e=[],f(a)}function f(a){e[++b]={results:[],andor:a}}function g(a){e[b].results.push(a)}function h(){var c=e[b],d,f;return b=Math.max(0,b-1),d=c.results,f=a.map(d,function(a){return a||null}),c.andor==='or'?f.length>0:f.length===d.length}a.each(d.ruleGroups,function(j,k){var b=d.ruleGroups[j],e;i(b.andor),a.each(b.rules,function(j,a){var b,e,i;switch(a.source_type){case'component':b=a.source,e=c.find('.'+b)[0],i=d.values[b]?d.values[b]:null,g(window.Drupal.webform[a.callback](e,i,a.value));break;case'conditional_start':f(a.andor);break;case'conditional_end':g(h());break}}),e=h(),a.each(b.actions,function(n,f){var b=c.find('.'+f.target),d=f.invert?!e:e,l,g,k,h,i,j,m;switch(f.action){case'show':l=d!=Drupal.webform.isVisible(b),d?(b.find('.webform-conditional-disabled:not(.webform-disabled-flag)').removeClass('webform-conditional-disabled').webformProp('disabled',!1),b.removeClass('webform-conditional-hidden').show(),c.find('.chosen-disabled').prev().trigger('chosen:updated.chosen')):b.hide().addClass('webform-conditional-hidden').find(':input').addClass('webform-conditional-disabled webform-disabled-flag').webformProp('disabled',!0),l&&b.is('tr')&&Drupal.webform.restripeTable(b.closest('table').first());break;case'require':g=b.find('.form-required, .form-optional').first(),d!=g.hasClass('form-required')&&(k=b.find("input:text,textarea,input[type='email'],select,input:radio,input:file"),Drupal.detachBehaviors(g),k.webformProp('required',d).toggleClass('required',d),d?g.replaceWith('<span class="form-required" title="'+Drupal.t('This field is required.')+'">*</span>'):g.replaceWith('<span class="form-optional"></span>'),Drupal.attachBehaviors(g));break;case'set':h=b.find("input:text,textarea,input[type='email']"),i=b.find('select,select option,input:radio,input:checkbox'),j=b.filter('.webform-component-markup'),d?(m=a.map(f.argument.split(','),a.trim),i.webformVal(m).webformProp('disabled',!0).addClass('webform-disabled-flag'),h.val([f.argument]).webformProp('readonly',!0).addClass('webform-disabled-flag'),j.html(f.argument)):(i.not('.webform-disabled-flag').webformProp('disabled',!1),h.not('.webform-disabled-flag').webformProp('readonly',!1),j.each(function(){var b=a(this),c=b.data('webform-markup');c!==void 0&&b.html(c)}));break}})}),c.find('.webform-disabled-flag').removeClass('webform-disabled-flag')},Drupal.webform.stopEvent=function(){return!1},Drupal.webform.conditionalOperatorStringEqual=function(c,d,e){var b=!1,f=Drupal.webform.stringValue(c,d);return a.each(f,function(c,a){if(a.toLowerCase()===e.toLowerCase())return b=!0,!1}),b},Drupal.webform.conditionalOperatorStringNotEqual=function(c,d,e){var b=!1,f=Drupal.webform.stringValue(c,d);return a.each(f,function(c,a){a.toLowerCase()===e.toLowerCase()&&(b=!0)}),!b},Drupal.webform.conditionalOperatorStringContains=function(c,d,e){var b=!1,f=Drupal.webform.stringValue(c,d);return a.each(f,function(c,a){if(a.toLowerCase().indexOf(e.toLowerCase())>-1)return b=!0,!1}),b},Drupal.webform.conditionalOperatorStringDoesNotContain=function(c,d,e){var b=!1,f=Drupal.webform.stringValue(c,d);return a.each(f,function(c,a){a.toLowerCase().indexOf(e.toLowerCase())>-1&&(b=!0)}),!b},Drupal.webform.conditionalOperatorStringBeginsWith=function(c,d,e){var b=!1,f=Drupal.webform.stringValue(c,d);return a.each(f,function(c,a){if(a.toLowerCase().indexOf(e.toLowerCase())===0)return b=!0,!1}),b},Drupal.webform.conditionalOperatorStringEndsWith=function(d,e,b){var c=!1,f=Drupal.webform.stringValue(d,e);return a.each(f,function(d,a){if(a.toLowerCase().lastIndexOf(b.toLowerCase())===a.length-b.length)return c=!0,!1}),c},Drupal.webform.conditionalOperatorStringEmpty=function(c,d,f){var e=Drupal.webform.stringValue(c,d),b=!0;return a.each(e,function(c,a){if(a!=='')return b=!1,!1}),b},Drupal.webform.conditionalOperatorStringNotEmpty=function(a,b,c){return!Drupal.webform.conditionalOperatorStringEmpty(a,b,c)},Drupal.webform.conditionalOperatorSelectGreaterThan=function(a,b,c){var d=Drupal.webform.stringValue(a,b);return Drupal.webform.compare_select(d[0],c,a)>0},Drupal.webform.conditionalOperatorSelectGreaterThanEqual=function(a,c,d){var e=Drupal.webform.stringValue(a,c),b=Drupal.webform.compare_select(e[0],d,a);return b>0||b===0},Drupal.webform.conditionalOperatorSelectLessThan=function(a,b,c){var d=Drupal.webform.stringValue(a,b);return Drupal.webform.compare_select(d[0],c,a)<0},Drupal.webform.conditionalOperatorSelectLessThanEqual=function(a,c,d){var e=Drupal.webform.stringValue(a,c),b=Drupal.webform.compare_select(e[0],d,a);return b<0||b===0},Drupal.webform.conditionalOperatorNumericEqual=function(b,c,d){var a=Drupal.webform.stringValue(b,c),e=1e-6;return a[0]!==''&&Math.abs(parseFloat(a[0])-parseFloat(d))<e},Drupal.webform.conditionalOperatorNumericNotEqual=function(b,c,d){var a=Drupal.webform.stringValue(b,c),e=1e-6;return a[0]===''||Math.abs(parseFloat(a[0])-parseFloat(d))>=e},Drupal.webform.conditionalOperatorNumericGreaterThan=function(a,b,c){var d=Drupal.webform.stringValue(a,b);return parseFloat(d[0])>parseFloat(c)},Drupal.webform.conditionalOperatorNumericGreaterThanEqual=function(a,b,c){return Drupal.webform.conditionalOperatorNumericGreaterThan(a,b,c)||Drupal.webform.conditionalOperatorNumericEqual(a,b,c)},Drupal.webform.conditionalOperatorNumericLessThan=function(a,b,c){var d=Drupal.webform.stringValue(a,b);return parseFloat(d[0])<parseFloat(c)},Drupal.webform.conditionalOperatorNumericLessThanEqual=function(a,b,c){return Drupal.webform.conditionalOperatorNumericLessThan(a,b,c)||Drupal.webform.conditionalOperatorNumericEqual(a,b,c)},Drupal.webform.conditionalOperatorDateEqual=function(a,b,c){var d=Drupal.webform.dateValue(a,b);return d===c},Drupal.webform.conditionalOperatorDateNotEqual=function(a,b,c){return!Drupal.webform.conditionalOperatorDateEqual(a,b,c)},Drupal.webform.conditionalOperatorDateBefore=function(b,c,d){var a=Drupal.webform.dateValue(b,c);return a!==!1&&a<d},Drupal.webform.conditionalOperatorDateBeforeEqual=function(c,d,b){var a=Drupal.webform.dateValue(c,d);return a!==!1&&(a<b||a===b)},Drupal.webform.conditionalOperatorDateAfter=function(b,c,d){var a=Drupal.webform.dateValue(b,c);return a!==!1&&a>d},Drupal.webform.conditionalOperatorDateAfterEqual=function(c,d,b){var a=Drupal.webform.dateValue(c,d);return a!==!1&&(a>b||a===b)},Drupal.webform.conditionalOperatorTimeEqual=function(a,b,c){var d=Drupal.webform.timeValue(a,b);return d===c},Drupal.webform.conditionalOperatorTimeNotEqual=function(a,b,c){return!Drupal.webform.conditionalOperatorTimeEqual(a,b,c)},Drupal.webform.conditionalOperatorTimeBefore=function(b,c,d){var a=Drupal.webform.timeValue(b,c);return a!==!1&&a<d},Drupal.webform.conditionalOperatorTimeBeforeEqual=function(c,d,b){var a=Drupal.webform.timeValue(c,d);return a!==!1&&(a<b||a===b)},Drupal.webform.conditionalOperatorTimeAfter=function(b,c,d){var a=Drupal.webform.timeValue(b,c);return a!==!1&&a>d},Drupal.webform.conditionalOperatorTimeAfterEqual=function(c,d,b){var a=Drupal.webform.timeValue(c,d);return a!==!1&&(a>b||a===b)},Drupal.webform.compare_select=function(e,f,g){var b=[],c,d;return a('option,input:radio,input:checkbox',g).each(function(){b.push(a(this).val())}),c=b.indexOf(e),d=b.indexOf(f),c<0||d<0?null:c-d},Drupal.webform.isVisible=function(a){return a.hasClass('webform-component-hidden')?!a.find('input').first().hasClass('webform-conditional-disabled'):a.closest('.webform-conditional-hidden').length==0},Drupal.webform.stringValue=function(f,e){var b=[],c,d;if(f)c=a(f),Drupal.webform.isVisible(c)&&(c.find('input[type=checkbox]:checked,input[type=radio]:checked').each(function(){b.push(this.value)}),b.length||(d=c.find('select').val(),d&&(a.isArray(d)?b=d:b.push(d))),b.length||c.find('input:not([type=checkbox],[type=radio]),textarea').each(function(){b.push(this.value)}));else switch(a.type(e)){case'array':b=e;break;case'string':b.push(e);break}return b},Drupal.webform.dateValue=function(f,b){var e=!1,c,g,d,h;return f?(c=a(f),Drupal.webform.isVisible(c)&&(g=c.find('[name*=day]').val(),d=c.find('[name*=month]').val(),h=c.find('[name*=year]').val(),d&&d--,h!==''&&d!==''&&g!==''&&(e=Date.UTC(h,d,g)/1e3))):(a.type(b)==='array'&&b.length&&(b=b[0]),a.type(b)==='string'&&(b=b.split('-')),b.length===3&&(e=Date.UTC(b[0],b[1],b[2])/1e3)),e},Drupal.webform.timeValue=function(g,c){var f=!1,e,b,d,h;return g?(e=a(g),Drupal.webform.isVisible(e)&&(b=e.find('[name*=hour]').val(),d=e.find('[name*=minute]').val(),h=e.find('[name*=ampm]:checked').val(),b=b===''?b:parseInt(b),d=d===''?d:parseInt(d),b!==''&&(b=b<12&&h=='pm'?b+12:b,b=b===12&&h=='am'?0:b),b!==''&&d!==''&&(f=Date.UTC(1970,0,1,b,d)/1e3))):(a.type(c)==='array'&&c.length&&(c=c[0]),a.type(c)==='string'&&(c=c.split(':')),c.length>=2&&(f=Date.UTC(1970,0,1,c[0],c[1])/1e3)),f},a.fn.webformProp=a.fn.webformProp||function(b,c){return c?a.fn.prop?this.prop(b,!0):this.attr(b,!0):a.fn.prop?this.prop(b,!1):this.removeAttr(b)},a.fn.webformVal=function(b){return this.each(function(){var c=a(this),d=c.val(),e=a.inArray(c.val(),b)!=-1;this.nodeName=='OPTION'?c.webformProp('selected',!!e&&d):c.val(!!e&&[d])}),this},Drupal.webform.restripeTable=function(b){a('> tbody > tr, > tr',b).filter(':visible:odd').filter('.odd').removeClass('odd').addClass('even').end().end().filter(':visible:even').filter('.even').removeClass('even').addClass('odd')}}(jQuery)