(self.webpackChunklite=self.webpackChunklite||[]).push([[864],{59250:(e,n,i)=>{"use strict";i.d(n,{MA:()=>a,Zh:()=>r,jM:()=>u});var t=i(63038),d=i.n(t),o=i(67294),l={mutedAuthorIds:[],setMutedAuthorIds:function(){},mutedPubIds:[],setMutedPubIds:function(){},dismissedPostIds:[],setDismissedPostIds:function(){},isMutingFromHomeFeed:!0,seeLessPostIds:[],setSeeLessPostIds:function(){}},a=function(e,n,i,t,d){return e.filter((function(e){var o,l,a,s,r,u;return!(n.indexOf(null===(o=e.post)||void 0===o||null===(l=o.creator)||void 0===l?void 0:l.id)>-1||i.indexOf(null===(a=e.post)||void 0===a||null===(s=a.collection)||void 0===s?void 0:s.id)>-1||t.indexOf(null===(r=e.post)||void 0===r?void 0:r.id)>-1||d.indexOf(null===(u=e.post)||void 0===u?void 0:u.id)>-1)}))},s=(0,o.createContext)(l),r=function(e){var n=e.children,i=(0,o.useState)(l.mutedAuthorIds),t=d()(i,2),a=t[0],r=t[1],u=(0,o.useState)(l.mutedPubIds),c=d()(u,2),m=c[0],k=c[1],v=(0,o.useState)(l.dismissedPostIds),p=d()(v,2),S=p[0],f=p[1],N=(0,o.useState)(l.seeLessPostIds),F=d()(N,2),g=F[0],I=F[1],P=l.isMutingFromHomeFeed;return o.createElement(s.Provider,{value:{mutedAuthorIds:a,setMutedAuthorIds:r,mutedPubIds:m,setMutedPubIds:k,dismissedPostIds:S,setDismissedPostIds:f,isMutingFromHomeFeed:P,seeLessPostIds:g,setSeeLessPostIds:I}},n)},u=function(){return(0,o.useContext)(s)}},51277:(e,n,i)=>{"use strict";i.d(n,{v:()=>s});var t=i(319),d=i.n(t),o=i(48172),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuWithNegativeSignal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}}]}}].concat(d()(o.g.definitions))},a=i(94630),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuWithNegativeSignal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}].concat(d()(l.definitions),d()(a.G.definitions))}},91743:(e,n,i)=>{"use strict";i.d(n,{t:()=>Z});var t=i(67294),d=i(41274),o=i(6443),l=i(67701),a=i(62685),s=i(66227),r=i(97217),u=i(319),c=i.n(u),m=i(59713),k=i.n(m),v=i(63038),p=i.n(v),S=i(82492),f=i.n(S),N=i(46829),F=i(71439),g=i(5977),I=i(59250),P=i(93774),E=i(99323),b=i(25550),h=i(38352),w=i(37774),y=i(77355),C=i(93310),x=i(73917),A=i(18627),M=i(66411),_=i(78285),O=i(77280),D=i(43487);function T(){return(T=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}var U=t.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),j=t.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const R=function(e){return t.createElement("svg",T({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),U,j)};var B=i(66823),L=i(75880),H=function(e){var n=e.creatorId,i=e.viewerId,d=e.muteAuthor,o=e.hidePopover,l=e.eventData,a=e.isActiveExpandedPost,s=(0,M.pK)(),r=(0,A.Av)(),u={id:n||""},m=(0,L.Pd)(u).viewerEdge,k=!(null==m||!m.isFollowing),v=!(null==m||!m.isMuting),S=(0,E.sK)().clearExpandedState,f=(0,g.k6)(),F=(0,I.jM)(),P=F.mutedAuthorIds,b=F.setMutedAuthorIds,w=F.isMutingFromHomeFeed,y=t.useCallback((function(e){b([].concat(c()(P),[e]))}),[P]),x=(0,N.useMutation)(B.g,{variables:{targetUserId:n||""},optimisticResponse:{unfollowUser:{__typename:"User",id:n||"",viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(n,"-viewerId:").concat(i),isFollowing:!1}}}}),_=p()(x,1)[0];return n?k?t.createElement(h.Sl,null,t.createElement(C.r,{onClick:function(){r.event("user.unfollowed",{targetUserId:n,source:s}),_(),o()}},"Unfollow this author")):v?null:t.createElement(h.Sl,null,t.createElement(C.r,{onClick:function(){r.event("user.muted",l),d(),w&&(y(n),a&&(S(),f.goBack())),o()}},"Mute this author")):null},V=i(24415),K=i(75150),G=i(82405),W=function(e){var n=e.collectionId,i=e.viewerId,d=e.hidePopover,o=e.mutePub,a=e.eventData,s=e.isActiveExpandedPost,r=(0,A.Av)(),u=(0,M.pK)(),m={id:n||""},k=(0,l.gY)(m).viewerEdge,v=!(null==k||!k.isFollowing),p=!(null==k||!k.isMuting),S=(0,G.MT)(n||"",i),f=(0,I.jM)(),N=f.mutedPubIds,F=f.setMutedPubIds,P=f.isMutingFromHomeFeed,b=(0,E.sK)().clearExpandedState,w=(0,g.k6)(),y=t.useCallback((function(e){F([].concat(c()(N),[e]))}),[N]);return n?v?t.createElement(h.Sl,null,t.createElement(C.r,{onClick:function(){r.event("collection.unfollowed",{collectionId:n,followSource:u}),S(),d()}},"Unfollow this publication")):p?null:t.createElement(h.Sl,null,t.createElement(C.r,{onClick:function(){r.event("collection.muted",a),o(),P&&(y(n),s&&(b(),w.goBack())),d()}},"Mute this publication")):null};function Y(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function z(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(i),!0).forEach((function(n){k()(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Q=function(e){var n=e.post,i=e.creatorId,d=e.collectionId,o=e.isActiveExpandedPost,l=e.setDismissedPostId,a=e.iconStyle,s=n.id,r=(0,b.r)().viewerId,u=t.useState(!1),m=p()(u,2),k=m[0],v=m[1],S=function(){return v(!1)},T=(0,P.l)(i,d),U=T.muteAuthor,j=T.mutePub,B=(0,E.sK)().clearExpandedState,L=(0,g.k6)(),G=(0,I.jM)(),Y=G.seeLessPostIds,Q=G.setSeeLessPostIds,Z=G.isMutingFromHomeFeed,J=(0,_.w)(),X=(0,N.useApolloClient)().cache,q=(0,A.Av)(),$=(0,M.pK)(),ee=(0,O.PM)(),ne=(0,D.v9)((function(e){return e.navigation.referrer})),ie=(0,D.v9)((function(e){return e.navigation.currentLocation})),te={postId:s,location:ie,referrer:ne,source:$,referrerSource:ee},de=t.useRef(null),oe=function(){null!==de.current&&window.clearTimeout(de.current)},le=function(){de.current=window.setTimeout((function(){q.event("post.see_less",z({userId:r,collection:d},te))}),3e3),X.modify({id:X.identify((0,F.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,n){var i=n.readField;return f()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&i("id",e.post)!==s}))})},intentionalFeed:function(e,n){var i=n.readField;return f()({},e,{items:e.items.filter((function(e){return!("HomeFeedItem"===(null==e?void 0:e.__typename)&&null!=e&&e.post&&i("id",e.post)===s)}))})}}}),Z&&(Q([].concat(c()(Y),[s])),o&&(B(),L.goBack()),l&&l(s)),J({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:oe}}),v(!1)},ae=t.useCallback((function(){return t.createElement(h.mX,null,t.createElement(y.x,{borderBottom:"BASE_LIGHTER",paddingBottom:"4px",marginBottom:"4px"},t.createElement(h.Sl,null,t.createElement(C.r,{onClick:le,"aria-label":"Show less like this"},t.createElement(y.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},t.createElement(y.x,{marginRight:"4px"},t.createElement(R,null)),t.createElement(y.x,null,"Show less like this"))))),t.createElement(K.T,{post:n,hidePopover:S}),t.createElement(H,{creatorId:i,viewerId:r,muteAuthor:U,isActiveExpandedPost:o,hidePopover:S,eventData:z({targetUserId:i},te)}),d&&t.createElement(W,{collectionId:d,viewerId:r,mutePub:j,isActiveExpandedPost:o,hidePopover:S,eventData:z({collection:d},te)}),t.createElement(w.z,{postId:s,viewerId:r,targetUserId:i||"",shouldShowShortenedCopy:!0,hidePopover:S}))}),[k,Y]);return i?t.createElement(x.J,{isVisible:k,hide:S,popoverRenderFn:ae},t.createElement(V.c,{onClick:function(){return v(!0)},"aria-label":"More options",iconStyle:a})):null},Z=function(e){var n=e.post,i=e.index,u=e.isActiveExpandedPost,c=e.setDismissedPostId,m=e.iconStyle,k=n.creator,v=n.collection,p=(0,o.H)(),S=p.loading,f=p.value,N=(0,l.gY)(v).viewerEdge,F=!S&&!!f,g=!(null==N||!N.isEditor),I=(null==f?void 0:f.id)===(null==k?void 0:k.id);return k&&F?g||I?t.createElement(s.B,null,(function(e){var i=e.show;return t.createElement(d.Z,{post:n,creator:k,collection:v,showLoadingIndicator:i,iconStyle:m})})):0===i?t.createElement(a.o,{flag:r.T3.USER_SIGNAL_MENU,text:"Improve your recommendations by telling us which stories you're not interested in.",dismissText:"OK",placement:"top"},t.createElement(Q,{post:n,creatorId:k.id,collectionId:null==v?void 0:v.id,isActiveExpandedPost:u,setDismissedPostId:c,iconStyle:m})):t.createElement(Q,{post:n,creatorId:k.id,collectionId:null==v?void 0:v.id,isActiveExpandedPost:u,setDismissedPostId:c,iconStyle:m}):null}},91727:(e,n,i)=>{"use strict";i.d(n,{S:()=>t});var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]}},99323:(e,n,i)=>{"use strict";i.d(n,{sK:()=>u});var t=i(28655),d=i.n(t),o=(i(63038),i(71439)),l=i(67294),a=i(27927);function s(){var e=d()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var r=(0,l.createContext)({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){},clearExpandedState:function(){}}),u=function(){return(0,l.useContext)(r)};(0,o.Ps)(s(),a.w)},94630:(e,n,i)=>{"use strict";i.d(n,{G:()=>u});var t=i(319),d=i.n(t),o=i(92001),l=i(93647),a=i(36736),s=i(91727),r=i(48172),u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}}]}}].concat(d()(o.m.definitions),d()(l.C.definitions),d()(o.G.definitions),d()(a.x.definitions),d()(s.S.definitions),d()(r.g.definitions))}},93647:(e,n,i)=>{"use strict";i.d(n,{C:()=>t});var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}}]}},36736:(e,n,i)=>{"use strict";i.d(n,{x:()=>t});var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/864.ba8623d9.chunk.js.map